# c++播放器

## 技术栈

* c++ 11+
* ffmpeg
* sdl

## 主要流程

### 解封装
Grabber
因为视频流和视频流是从一个文件里面打开的，所以写在一起就可以了

读取文件流 -> avPacket


### 解码

avPacket -> avFrame

### 重编码和重采样

画面的图像格式重编码
音频的格式重采样

#### 画面播放

使用sdl 将avFrame，直接绘制在窗口中

#### 音频播放

？

### 音画同步

获取视频每帧的时间戳
和音频avframe的时间戳
每次播放的时候，比较视频时间戳和音频的时间戳，如果视频的时间戳小了，则加快速度播放，反之减低帧率播放

#### 主要线程列表

* 主线程：等待sdl事件，绘制图像，播放声音（？）
* 线程1：read_frame 获取 avPacket
* 线程2：解码和重编码 获取avFrame
* 线程3：图像定时器，使用avFrame 激活sdl的事件
